{"version":3,"file":"iterable-differ-helper.js","sourceRoot":"","sources":["iterable-differ-helper.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;GAWG;;AAEH,qBAOO,eAAe,CAAC,CAAA;AAOvB;IAKI,8BAAoB,QAAyB,EAAU,IAAuB;QAA1D,aAAQ,GAAR,QAAQ,CAAiB;QAAU,SAAI,GAAJ,IAAI,CAAmB;QAFtE,qBAAgB,GAAsC,EAAE,CAAC;IAEiB,CAAC;IAEnF,sCAAO,GAAP,UAAQ,IAAiB;QACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,oCAAK,GAAL,UAAM,IAAY,EAAE,OAAsB;QACrC,EAAE,CAAC,CAAC,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC;YACnB,IAAM,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC;YACzC,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC;wBACD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;oBACpF,CAAE;oBAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnB,CAAC;YACL,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;YACvC,CAAC;QACL,CAAC;IACL,CAAC;IAED,sCAAO,GAAP,UAAQ,IAAY;QAChB,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAM,OAAO,GAA0B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1F,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACjC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;YACvD,CAAC;QACL,CAAC;IACL,CAAC;IAEE,+BAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,iBAAU,EAAE;KACnB,CAAC;IAEK,mCAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,sBAAe,GAAG;QACzB,EAAC,IAAI,EAAE,wBAAiB,GAAG;KAC1B,EAH6F,CAG7F,CAAC;IACF,2BAAC;AAAD,CAAC,AA3CD,IA2CC;AA3CY,4BAAoB,uBA2ChC,CAAA","sourcesContent":["/*!\n * devextreme-angular\n * Version: 16.2.5\n * Build date: Tue Feb 28 2017\n *\n * Copyright (c) 2012 - 2017 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\nimport {\r\n    Injectable,\r\n    SimpleChanges,\r\n    IterableDiffers,\r\n    IterableDiffer,\r\n    ChangeDetectorRef,\r\n    DefaultIterableDiffer\r\n} from '@angular/core';\r\n\r\nimport {\r\n    DxComponent\r\n} from './component';\r\n\r\n\r\nexport class IterableDifferHelper {\r\n\r\n    private _host: DxComponent;\r\n    private _propertyDiffers: { [id: string]: IterableDiffer; } = {};\r\n\r\n    constructor(private _differs: IterableDiffers, private _cdr: ChangeDetectorRef) { }\r\n\r\n    setHost(host: DxComponent) {\r\n        this._host = host;\r\n    }\r\n\r\n    setup(prop: string, changes: SimpleChanges) {\r\n         if (prop in changes) {\r\n            const value = changes[prop].currentValue;\r\n            if (value && Array.isArray(value)) {\r\n                if (!this._propertyDiffers[prop]) {\r\n                    try {\r\n                        this._propertyDiffers[prop] = this._differs.find(value).create(this._cdr, null);\r\n                    } catch (e) { }\r\n                }\r\n            } else {\r\n                delete this._propertyDiffers[prop];\r\n            }\r\n        }\r\n    }\r\n\r\n    doCheck(prop: string) {\r\n        if (this._propertyDiffers[prop]) {\r\n            const changes = <DefaultIterableDiffer>this._propertyDiffers[prop].diff(this._host[prop]);\r\n            if (changes && this._host.instance) {\r\n                this._host.instance.option(prop, this._host[prop]);\r\n            }\r\n        }\r\n    }\r\n\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: IterableDiffers, },\n{type: ChangeDetectorRef, },\n];\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}